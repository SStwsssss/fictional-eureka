<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ß–∞—Ç –Ω–∞ GitHub Pages</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 0 10px; }
    #messages { border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px; margin-bottom: 10px; }
    #messageInput { width: 70%; padding: 8px; }
    #sendBtn { padding: 8px 16px; }
    .message { margin-bottom: 8px; }
    .username { font-weight: bold; color: #2c3e50; }
  </style>
</head>
<body>
  <h1>–ß–∞—Ç</h1>
  <div id="messages"></div>
  <input type="text" id="username" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20">
  <br><br>
  <input type="text" id="messageInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ">
  <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // üîë –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ Firebase Console ‚Üí Project Settings ‚Üí SDK setup
    const firebaseConfig = {
      apiKey: "–í–ê–®_API_KEY",
      authDomain: "–í–ê–®_PROJECT.firebaseapp.com",
      databaseURL: "https://–í–ê–®_PROJECT-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "–í–ê–®_PROJECT",
      storageBucket: "–í–ê–®_PROJECT.appspot.com",
      messagingSenderId: "123456789",
      appId: "1:123456789:web:abcdef123456789"
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const messagesRef = db.ref("messages");

    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const messagesDiv = document.getElementById("messages");
    const messageInput = document.getElementById("messageInput");
    const usernameInput = document.getElementById("username");
    const sendBtn = document.getElementById("sendBtn");

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    messagesRef.limitToLast(50).on("child_added", (snapshot) => {
      const msg = snapshot.val();
      const div = document.createElement("div");
      div.className = "message";
      div.innerHTML = `<span class="username">${msg.user}:</span> ${msg.text}`;
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    sendBtn.addEventListener("click", sendMessage);
    messageInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    function sendMessage() {
      const user = usernameInput.value.trim();
      const text = messageInput.value.trim();
      if (!user || !text) {
        alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ!");
        return;
      }
      messagesRef.push({
        user: user,
        text: text,
        timestamp: firebase.database.ServerValue.TIMESTAMP
      });
      messageInput.value = "";
    }
  </script>
</body>
</html>
